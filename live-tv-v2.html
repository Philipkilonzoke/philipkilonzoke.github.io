<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Live TV - Brightlens News</title>

  <link rel="manifest" href="/manifest.json" />
  <meta name="theme-color" content="#1e1e1e" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="apple-mobile-web-app-title" content="Brightlens News" />
  <link rel="apple-touch-icon" href="/assets/icon-192.svg" />
  <meta name="description" content="Watch Live TV channels: CNN, BBC, Al Jazeera, Sky News, Citizen TV Kenya, NTV Kenya and more." />

  <style>
    :root { --primary-color:#2563eb; --bg:#ffffff; --text:#1e293b; --surface:#f8fafc; --border:#e2e8f0; }
    body { font-family: 'Inter', system-ui, sans-serif; background: var(--bg); color: var(--text); }
    .header{background:var(--surface);border-bottom:1px solid var(--border);position:sticky;top:0;z-index:100}
    .container{max-width:1200px;margin:0 auto;padding:1rem}
    .category-header{display:flex;align-items:end;justify-content:space-between;gap:1rem;margin:1rem 0}
    .searchbar{display:flex;gap:.75rem;align-items:center}
    .searchbar input{border:1px solid var(--border);border-radius:10px;padding:.75rem 1rem;min-width:260px}
    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:1rem}
    .channel-card{border:1px solid var(--border);border-radius:14px;background:var(--surface)}
    .channel-card-header{display:flex;gap:.75rem;padding:1rem}
    .channel-logo{width:56px;height:56px;object-fit:contain;background:#fff;border-radius:8px;border:1px solid var(--border)}
    .channel-meta h3{margin:0 0 .25rem;font-size:1.05rem}
    .channel-meta p{margin:0;color:#475569;font-size:.9rem}
    .channel-card-actions{padding:0 1rem 1rem}
    .watch-btn{background:var(--primary-color);border:0;color:#fff;border-radius:10px;padding:.6rem 1rem;cursor:pointer}
    .load-more{margin:1rem auto;display:none}

    /* Overlay */
    .overlay{position:fixed;inset:0;background:rgba(0,0,0,.9);display:none;align-items:center;justify-content:center;z-index:1000}
    .overlay.active{display:flex}
    .player-shell{width:min(100%,1100px);height:min(78vh,640px);background:#000;border-radius:12px;position:relative;overflow:hidden}
    .player-top{position:absolute;left:0;right:0;top:0;padding:.75rem 1rem;background:linear-gradient(180deg,rgba(0,0,0,.7),transparent);display:flex;align-items:center;justify-content:space-between;color:#fff;z-index:2}
    .player-title{display:flex;gap:.5rem;align-items:center}
    .player-actions{display:flex;gap:.5rem}
    .icon-btn{background:rgba(255,255,255,.12);border:1px solid rgba(255,255,255,.2);color:#fff;border-radius:8px;padding:.5rem .6rem;cursor:pointer}
    .player-body{position:absolute;inset:0}
    .player-body iframe{width:100%;height:100%;border:0}
    .loading{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;color:#fff;gap:.75rem}
    .spinner{width:36px;height:36px;border:3px solid rgba(255,255,255,.25);border-left-color:#fff;border-radius:50%;animation:spin 1s linear infinite}
    @keyframes spin{to{transform:rotate(360deg)}}
    .player-meta{position:absolute;left:0;right:0;bottom:0;background:linear-gradient(0deg,rgba(0,0,0,.8),transparent);color:#fff;padding:1rem;display:flex;gap:1rem;align-items:center}
    .player-meta img{width:84px;height:48px;object-fit:cover;border-radius:6px}
    .player-status .offline{color:#fbbf24}
    .player-status .error{color:#f87171}
  </style>

  <link rel="preload" href="css/styles.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <link rel="preload" href="css/themes.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <link rel="preload" href="/css/settings.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <noscript><link rel="stylesheet" href="css/styles.css"><link rel="stylesheet" href="css/themes.css"></noscript>

  <script src="https://cdn.onesignal.com/sdks/web/v16/OneSignalSDK.page.js" defer></script>
  <script src="/js/push-notifications.js" defer></script>
  <script src="/js/sidebar-navigation.js" defer></script>
  <script>
    if ('serviceWorker' in navigator) {
      addEventListener('load', () => navigator.serviceWorker.register('/service-worker.js'))
    }
  </script>
  <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"></noscript>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="preload" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"></noscript>
</head>
<body>
  <!-- Header cloned pattern (sidebar-navigation injects sidebar and mobile toggle) -->
  <header class="header">
    <div class="container">
      <div class="header-content">
        <div class="logo">
          <h1><a href="/" style="color:inherit;text-decoration:none"><i class="fas fa-newspaper"></i> Brightlens News</a></h1>
        </div>
        <nav class="nav">
          <div class="nav-links">
            <a href="/" class="nav-link">Home</a>
            <a href="/latest" class="nav-link">Breaking</a>
            <a href="/kenya" class="nav-link">Kenya</a>
            <a href="/world" class="nav-link">World</a>
            <a href="/entertainment" class="nav-link">Entertainment</a>
            <a href="/technology" class="nav-link">Technology</a>
            <a href="/business" class="nav-link">Business</a>
            <a href="/sports" class="nav-link">Sports</a>
            <a href="/health" class="nav-link">Health</a>
            <a href="/lifestyle" class="nav-link">Lifestyle</a>
            <a href="/food" class="nav-link">Food</a>
            <a href="/crypto" class="nav-link">Crypto</a>
            <a href="/astronomy" class="nav-link">Astronomy</a>
            <a href="/aviation" class="nav-link">Aviation</a>
            <a href="/live-tv-v2" class="nav-link active">Live TV</a>
          </div>
          <div class="nav-controls">
            <button id="theme-toggle" class="theme-toggle" title="Change Theme">
              <i class="fas fa-palette"></i>
            </button>
          </div>
          <script src="/js/settings.js" defer></script>
        </nav>
      </div>
    </div>
  </header>

  <main class="main">
    <div class="container">
      <div class="category-header">
        <div>
          <h2>Live TV</h2>
          <div class="category-meta">Watch trusted news channels live</div>
        </div>
        <div class="searchbar">
          <i class="fas fa-search"></i>
          <input id="channel-search" placeholder="Search channels..." />
        </div>
      </div>

      <div id="channels-grid" class="grid"></div>
      <div class="container" style="text-align:center">
        <button id="load-more" class="watch-btn load-more">Load more</button>
      </div>
    </div>
  </main>

  <!-- Theme Selector Modal -->
  <div id="theme-modal" class="theme-modal">
    <div class="theme-modal-content">
      <div class="theme-modal-header">
        <h3>Choose Theme</h3>
        <button class="theme-modal-close">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <div class="theme-grid"></div>
    </div>
  </div>

  <!-- Overlay Player -->
  <div id="player-overlay" class="overlay" aria-modal="true" role="dialog">
    <div class="player-shell">
      <div class="player-top">
        <div class="player-title">
          <span class="badge">‚óè LIVE</span>
          <span id="player-title">Loading...</span>
        </div>
        <div class="player-actions">
          <button id="back-to-list" class="icon-btn" title="Back"><i class="fas fa-arrow-left"></i></button>
          <button id="player-close" class="icon-btn" title="Close"><i class="fas fa-times"></i></button>
        </div>
      </div>
      <div id="player-loading" class="loading"><div class="spinner"></div> <span>Loading stream...</span></div>
      <div class="player-body" id="player-container"></div>
      <div class="player-meta">
        <div id="player-status"></div>
        <div id="player-meta"></div>
      </div>
    </div>
  </div>

  <!-- Footer (same structure as other pages) -->
  <footer class="footer">
    <div class="footer-wave">
      <svg viewBox="0 0 1440 120" fill="none" xmlns="https://www.w3.org/2000/svg">
        <path d="M0,64L48,58.7C96,53,192,43,288,48C384,53,480,75,576,80C672,85,768,75,864,64C960,53,1056,43,1152,48C1248,53,1344,75,1392,85.3L1440,96L1440,0L1392,0C1344,0,1248,0,1152,0C1056,0,960,0,864,0C768,0,672,0,576,0C480,0,384,0,288,0C192,0,96,0,48,0L0,0Z" fill="var(--primary-color)"/>
      </svg>
    </div>
    <div class="container">
      <div class="footer-content">
        <div class="footer-section footer-brand">
          <div class="footer-logo">
            <h4>
              <i class="fas fa-newspaper footer-icon"></i>
              Brightlens News
            </h4>
            <div class="footer-tagline">Your Gateway to Global News</div>
          </div>
          <p>Your trusted source for comprehensive news coverage from multiple reliable sources worldwide. Stay informed with real-time updates.</p>
        </div>
      </div>
    </div>
  </footer>

  <script src="/js/live-tv-v2.js" defer></script>
</body>
</html>