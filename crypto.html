<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crypto Market - Brightlens News</title>
    
    <!-- PWA Meta Tags -->
    <link rel="manifest" href="/manifest.json" />
    <meta name="theme-color" content="#1e1e1e" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="apple-mobile-web-app-title" content="Brightlens News" />
    <link rel="apple-touch-icon" href="/assets/icon-192.svg" />
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="Live cryptocurrency prices, market data, and trends. Track Bitcoin, Ethereum, and top crypto assets with real-time updates.">
    <meta name="keywords" content="cryptocurrency, bitcoin, ethereum, crypto prices, market data, blockchain, digital currency, Brightlens">
    <meta name="author" content="Philip Kilonzo">
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="Crypto Market - Brightlens News">
    <meta property="og:description" content="Live cryptocurrency prices and market data from reliable sources.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://philipkilonzoke.github.io/crypto">
    
    <!-- Critical CSS Inline for Faster Loading -->
    <style>
        *{margin:0;padding:0;box-sizing:border-box}
        :root{--primary-color:#2563eb;--background-color:#ffffff;--text-color:#1e293b;--surface-color:#f8fafc;--border-color:#e2e8f0}
        body{font-family:'Inter',system-ui,sans-serif;background:var(--background-color);color:var(--text-color);line-height:1.6}
        .loading-screen{position:fixed;top:0;left:0;width:100%;height:100%;background:var(--primary-color);display:flex;align-items:center;justify-content:center;z-index:9999;transition:opacity 0.3s}
        .loading-screen.hidden{opacity:0;visibility:hidden}
        .loading-container{text-align:center;color:white}
        .loading-spinner{width:60px;height:60px;border:4px solid rgba(255,255,255,0.3);border-top:4px solid white;border-radius:50%;animation:spin 1s linear infinite;margin:0 auto 1rem}
        @keyframes spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}
        .header{background:var(--surface-color);border-bottom:1px solid var(--border-color);position:sticky;top:0;z-index:100}
    </style>
    <!-- Non-Critical CSS Files -->
    <link rel="preload" href="css/styles.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <link rel="preload" href="css/themes.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="css/styles.css"><link rel="stylesheet" href="css/themes.css"></noscript>
    
    <!-- OneSignal SDK -->
    <script src="https://cdn.onesignal.com/sdks/web/v16/OneSignalSDK.page.js" defer></script>
    <script src="js/push-notifications.js" defer></script>

    <!-- Sidebar Navigation Script -->
    <script src="js/sidebar-navigation.js" defer></script>
    
    <!-- Service Worker Registration -->
    <script>
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
          navigator.serviceWorker.register('/service-worker.js')
            .then(registration => {
              console.log('SW registered: ', registration);
            })
            .catch(registrationError => {
              console.log('SW registration failed: ', registrationError);
            });
        });
      }
    </script>
    <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"></noscript>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"></noscript>
    
    <!-- Chart.js for crypto charts -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <style>
        /* Crypto specific styles */
        .crypto-header {
            background: linear-gradient(135deg, #1e293b, #334155, #475569);
            color: white;
            padding: 3rem 0 2rem;
            position: relative;
            overflow: hidden;
        }
        
        .crypto-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="https://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="crypto-pattern" width="20" height="20" patternUnits="userSpaceOnUse"><text x="10" y="15" font-size="12" fill="white" opacity="0.05" text-anchor="middle">â‚¿</text></pattern></defs><rect width="100" height="100" fill="url(%23crypto-pattern)"/></svg>');
            pointer-events: none;
        }
        
        .crypto-header-content {
            position: relative;
            z-index: 1;
            text-align: center;
        }
        
        .crypto-title {
            font-size: 3rem;
            font-weight: 800;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 1rem;
            background: linear-gradient(135deg, #fbbf24, #f59e0b, #d97706);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .crypto-subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
            margin-bottom: 2rem;
            font-weight: 400;
        }
        
        .crypto-stats {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }
        
        .stat-item {
            text-align: center;
            padding: 1rem 1.5rem;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .stat-number {
            font-size: 1.5rem;
            font-weight: 700;
            color: #fbbf24;
        }
        
        .stat-label {
            font-size: 0.9rem;
            opacity: 0.8;
            margin-top: 0.25rem;
        }
        
        .crypto-controls {
            display: flex;
            justify-content: center;
            gap: 1rem;
            flex-wrap: wrap;
            margin-bottom: 1rem;
            align-items: center;
        }
        
        .search-container {
            position: relative;
            max-width: 350px;
            width: 100%;
        }
        
        .search-input {
            width: 100%;
            padding: 1rem 1rem 1rem 3rem;
            border: 2px solid rgba(255,255,255,0.2);
            border-radius: 50px;
            background: rgba(255,255,255,0.1);
            color: white;
            font-size: 1rem;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }
        
        .search-input:focus {
            outline: none;
            border-color: #fbbf24;
            background: rgba(255,255,255,0.15);
            box-shadow: 0 0 0 3px rgba(251, 191, 36, 0.2);
        }
        
        .search-input::placeholder {
            color: rgba(255,255,255,0.6);
        }
        
        .search-icon {
            position: absolute;
            left: 1.25rem;
            top: 50%;
            transform: translateY(-50%);
            color: rgba(255,255,255,0.6);
            font-size: 1.1rem;
        }
        
        .filter-select {
            padding: 1rem 1.5rem;
            border: 2px solid rgba(255,255,255,0.2);
            border-radius: 50px;
            background: rgba(255,255,255,0.1);
            color: white;
            font-size: 1rem;
            backdrop-filter: blur(10px);
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 150px;
        }
        
        .filter-select:focus {
            outline: none;
            border-color: #fbbf24;
            background: rgba(255,255,255,0.15);
        }
        
        .filter-select option {
            background: #1e293b;
            color: white;
        }
        
        .refresh-btn {
            padding: 1rem 1.5rem;
            border: 2px solid rgba(255,255,255,0.2);
            border-radius: 50px;
            background: rgba(255,255,255,0.1);
            color: white;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-weight: 500;
        }
        
        .refresh-btn:hover {
            background: rgba(251, 191, 36, 0.2);
            border-color: #fbbf24;
            transform: translateY(-2px);
        }
        
        .refresh-btn.loading {
            pointer-events: none;
            opacity: 0.7;
        }
        
        .refresh-btn.loading i {
            animation: spin 1s linear infinite;
        }
        
        .view-toggle {
            display: flex;
            background: rgba(255,255,255,0.1);
            border-radius: 50px;
            padding: 0.25rem;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
        }
        
        .view-btn {
            padding: 0.75rem 1rem;
            border: none;
            background: transparent;
            color: rgba(255,255,255,0.7);
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }
        
        .view-btn.active {
            background: #fbbf24;
            color: #1e293b;
            font-weight: 600;
        }
        
        .view-btn:hover:not(.active) {
            color: white;
        }
        
        .crypto-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 1.5rem;
            padding: 2rem 0;
            transition: all 0.3s ease;
        }
        
        .crypto-grid.list-view {
            grid-template-columns: 1fr;
        }
        
        .crypto-card {
            background: white;
            border-radius: 16px;
            padding: 1.5rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
            border: 1px solid #e5e7eb;
            position: relative;
            overflow: hidden;
            cursor: pointer;
        }
        
        .crypto-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 24px rgba(0, 0, 0, 0.1);
            border-color: #fbbf24;
        }
        
        .crypto-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #fbbf24, #f59e0b);
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .crypto-card:hover::before {
            opacity: 1;
        }
        
        .crypto-card.trending {
            border-color: #10b981;
            background: linear-gradient(135deg, #f0fdf4, #ffffff);
        }
        
        .crypto-card.declining {
            border-color: #ef4444;
            background: linear-gradient(135deg, #fef2f2, #ffffff);
        }
        
        .crypto-header-card {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }
        
        .crypto-info {
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        
        .crypto-icon {
            font-size: 2rem;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #fbbf24, #f59e0b);
            border-radius: 12px;
            color: white;
            font-weight: bold;
        }
        
        .crypto-details h3 {
            font-size: 1.25rem;
            font-weight: 600;
            margin: 0;
            color: #1f2937;
        }
        
        .crypto-symbol {
            font-size: 0.9rem;
            color: #6b7280;
            font-weight: 500;
        }
        
        .crypto-actions {
            display: flex;
            gap: 0.5rem;
        }
        
        .action-btn {
            width: 32px;
            height: 32px;
            border: none;
            border-radius: 8px;
            background: rgba(251, 191, 36, 0.1);
            color: #f59e0b;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .action-btn:hover {
            background: #fbbf24;
            color: white;
            transform: scale(1.1);
        }
        
        .action-btn.favorite-btn.active {
            background: #ef4444;
            color: white;
        }
        
        .crypto-price-section {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }
        
        .crypto-price {
            font-size: 1.75rem;
            font-weight: 700;
            color: #1f2937;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .price-direction {
            font-size: 1rem;
            font-weight: 600;
        }
        
        .crypto-change {
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-weight: 600;
            font-size: 0.9rem;
        }
        
        .crypto-change.positive {
            background: #dcfce7;
            color: #166534;
        }
        
        .crypto-change.negative {
            background: #fee2e2;
            color: #dc2626;
        }
        
        .crypto-sparkline {
            margin: 1rem 0;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .sparkline-chart {
            width: 100%;
            height: 100%;
        }
        
        .crypto-stats {
            margin: 1rem 0;
        }
        
        .stat-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.5rem 0;
            border-bottom: 1px solid #f3f4f6;
        }
        
        .stat-row:last-child {
            border-bottom: none;
        }
        
        .stat-label {
            font-size: 0.85rem;
            color: #6b7280;
            font-weight: 500;
        }
        
        .stat-value {
            font-size: 0.85rem;
            color: #1f2937;
            font-weight: 600;
        }
        
        .crypto-footer {
            display: flex;
            gap: 0.75rem;
            margin-top: 1rem;
        }
        
        .detail-btn, .trade-btn {
            flex: 1;
            padding: 0.75rem 1rem;
            border: none;
            border-radius: 8px;
            font-size: 0.9rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }
        
        .detail-btn {
            background: rgba(251, 191, 36, 0.1);
            color: #f59e0b;
        }
        
        .detail-btn:hover {
            background: #fbbf24;
            color: white;
        }
        
        .trade-btn {
            background: #10b981;
            color: white;
        }
        
        .trade-btn:hover {
            background: #059669;
            transform: translateY(-1px);
        }
        
        .crypto-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.85rem;
            color: #6b7280;
        }
        
        .crypto-meta span:first-child {
            font-weight: 500;
        }
        
        .crypto-meta span:last-child {
            font-weight: 600;
        }
        
        /* List view styles */
        .crypto-card.list-view {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1rem 1.5rem;
        }
        
        .crypto-card.list-view .crypto-header-card {
            margin-bottom: 0;
            flex: 1;
        }
        
        .crypto-card.list-view .crypto-price {
            margin-bottom: 0;
            margin-right: 2rem;
        }
        
        .crypto-card.list-view .crypto-meta {
            margin-right: 2rem;
        }
        
        .crypto-card.list-view .crypto-actions {
            margin-left: 1rem;
        }
        
        .last-updated {
            text-align: center;
            color: #6b7280;
            font-size: 0.9rem;
            margin: 1rem 0;
            font-weight: 500;
        }
        
        .chart-section {
            background: white;
            border-radius: 16px;
            padding: 2rem;
            margin: 2rem 0;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            border: 1px solid #e5e7eb;
        }
        
        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }
        
        .chart-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: #1f2937;
        }
        
        .chart-controls {
            display: flex;
            gap: 0.5rem;
        }
        
        .chart-btn {
            padding: 0.5rem 1rem;
            border: 1px solid #e5e7eb;
            background: white;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }
        
        .chart-btn.active {
            background: #fbbf24;
            color: white;
            border-color: #fbbf24;
        }
        
        .chart-btn:hover:not(.active) {
            background: #f3f4f6;
        }
        
        .chart-container {
            height: 300px;
            position: relative;
        }
        
        .news-section {
            margin: 3rem 0;
        }
        
        .news-header {
            text-align: center;
            margin-bottom: 2rem;
        }
        
        .news-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1.5rem;
        }
        
        .news-card {
            background: var(--surface-color);
            border-radius: 12px;
            padding: 1.5rem;
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
        }
        
        .news-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.1);
        }
        
        .news-title {
            font-size: 1.125rem;
            font-weight: 600;
            margin-bottom: 0.75rem;
            line-height: 1.4;
        }
        
        .news-excerpt {
            color: var(--text-muted);
            margin-bottom: 1rem;
            line-height: 1.5;
        }
        
        .news-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.875rem;
            color: var(--text-muted);
        }
        
        .error-message {
            text-align: center;
            padding: 3rem;
            color: #6b7280;
        }
        
        .error-message i {
            font-size: 3rem;
            color: #fbbf24;
            margin-bottom: 1rem;
        }
        
        .error-message h3 {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
            color: #1f2937;
        }
        
        /* Responsive design */
        @media (max-width: 768px) {
            .crypto-title {
                font-size: 2rem;
            }
            
            .crypto-stats {
                gap: 1rem;
            }
            
            .stat-item {
                padding: 0.75rem 1rem;
            }
            
            .crypto-controls {
                flex-direction: column;
                align-items: stretch;
            }
            
            .search-container {
                max-width: none;
            }
            
            .crypto-grid {
                grid-template-columns: 1fr;
            }
            
            .crypto-card.list-view {
                flex-direction: column;
                align-items: flex-start;
                gap: 1rem;
            }
            
            .crypto-card.list-view .crypto-price,
            .crypto-card.list-view .crypto-meta {
                margin-right: 0;
            }
        }
    </style>
</head>
<body>
    <!-- Loading Screen -->
    <div id="loading-screen" class="loading-screen">
        <div class="loading-container">
            <div class="loading-spinner"></div>
            <h2>Brightlens News</h2>
            <p>Loading crypto market data...</p>
        </div>
    </div>

    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <h1><a href="/" style="color: inherit; text-decoration: none;"><i class="fas fa-newspaper"></i> Brightlens News</a></h1>
                </div>
                <nav class="nav">
                    <div class="nav-links">
                        <a href="/" class="nav-link">Home</a>
                        <a href="/latest" class="nav-link">Breaking</a>
                        <a href="/kenya" class="nav-link">Kenya</a>
                        <a href="/world" class="nav-link">World</a>
                        <a href="/entertainment" class="nav-link">Entertainment</a>
                        <a href="/technology" class="nav-link">Technology</a>
                        <a href="/business" class="nav-link">Business</a>
                        <a href="/sports" class="nav-link">Sports</a>
                        <a href="/health" class="nav-link">Health</a>
                        <a href="/lifestyle" class="nav-link">Lifestyle</a>
                        <a href="/music" class="nav-link">Music</a>
                        <a href="/food" class="nav-link">Food</a>
                        <a href="/movies-series" class="nav-link">Movies & Series</a>
                        <a href="/crypto" class="nav-link active">Crypto</a>
                        <a href="/astronomy" class="nav-link">Astronomy</a>
                    </div>
                    <div class="nav-controls">
                        <button id="theme-toggle" class="theme-toggle" title="Change Theme">
                            <i class="fas fa-palette"></i>
                        </button>
                    </div>
                </nav>
                
            </div>
        </div>
    </header>

    

    <!-- Main Content -->
    <main class="main">
        <!-- Crypto Header -->
        <div class="crypto-header">
            <div class="container">
                <div class="crypto-header-content">
                    <h1 class="crypto-title">
                        <span>ðŸ’¹ Live Crypto Market Updates</span>
                    </h1>
                    <p class="crypto-subtitle">Real-time cryptocurrency prices and market data</p>
                    
                    <div class="crypto-stats">
                        <div class="stat-item">
                            <div class="stat-number">24/7</div>
                            <div class="stat-label">Coverage</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number">17+</div>
                            <div class="stat-label">Categories</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number">âˆž</div>
                            <div class="stat-label">Stories</div>
                        </div>
                    </div>

                    <div class="crypto-controls">
                        <div class="search-container">
                            <i class="fas fa-search search-icon"></i>
                            <input type="text" id="crypto-search" placeholder="Search cryptocurrencies..." class="search-input">
                        </div>
                        
                        <select id="sort-filter" class="filter-select">
                            <option value="">Sort by</option>
                            <option value="price-high">Price: High to Low</option>
                            <option value="price-low">Price: Low to High</option>
                            <option value="change-high">Change: High to Low</option>
                            <option value="change-low">Change: Low to High</option>
                            <option value="name">Name: A-Z</option>
                        </select>
                        
                        <div class="view-toggle">
                            <button class="view-btn active" data-view="grid">
                                <i class="fas fa-th"></i>
                            </button>
                            <button class="view-btn" data-view="list">
                                <i class="fas fa-list"></i>
                            </button>
                        </div>
                        
                        <button id="refresh-btn" class="refresh-btn">
                            <i class="fas fa-sync-alt"></i>
                            Refresh
                        </button>
                    </div>
                    
                    <div class="last-updated" id="last-updated">Loading...</div>
                </div>
            </div>
        </div>

        <div class="container">
            <!-- Crypto Grid -->
            <div id="crypto-grid" class="crypto-grid">
                <!-- Crypto cards will be populated here -->
            </div>

            <!-- Chart Section -->
            <div class="chart-section">
                <div class="chart-header">
                    <h2 class="chart-title">Price Chart</h2>
                    <div class="chart-controls">
                        <button class="chart-btn active" data-period="1h">1H</button>
                        <button class="chart-btn" data-period="24h">24H</button>
                        <button class="chart-btn" data-period="7d">7D</button>
                    </div>
                </div>
                <div class="chart-container">
                    <canvas id="price-chart"></canvas>
                </div>
            </div>

            
        </div>
    </main>

    <!-- Theme Selector Modal -->
    <div id="theme-modal" class="theme-modal">
        <div class="theme-modal-content">
            <div class="theme-modal-header">
                <h3>Choose Theme</h3>
                <button class="theme-modal-close">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="theme-grid">
                <button class="theme-option" data-theme="default">
                    <div class="theme-preview theme-preview-default"></div>
                    <span>Default</span>
                </button>
                <button class="theme-option" data-theme="dark">
                    <div class="theme-preview theme-preview-dark"></div>
                    <span>Dark</span>
                </button>
                <button class="theme-option" data-theme="blue">
                    <div class="theme-preview theme-preview-blue"></div>
                    <span>Ocean Blue</span>
                </button>
                <button class="theme-option" data-theme="green">
                    <div class="theme-preview theme-preview-green"></div>
                    <span>Forest Green</span>
                </button>
                <button class="theme-option" data-theme="purple">
                    <div class="theme-preview theme-preview-purple"></div>
                    <span>Royal Purple</span>
                </button>
                <button class="theme-option" data-theme="orange">
                    <div class="theme-preview theme-preview-orange"></div>
                    <span>Sunset Orange</span>
                </button>
                <button class="theme-option" data-theme="rose">
                    <div class="theme-preview theme-preview-rose"></div>
                    <span>Rose Pink</span>
                </button>
                <button class="theme-option" data-theme="emerald">
                    <div class="theme-preview theme-preview-emerald"></div>
                    <span>Emerald</span>
                </button>
                <button class="theme-option" data-theme="indigo">
                    <div class="theme-preview theme-preview-indigo"></div>
                    <span>Indigo</span>
                </button>
                <button class="theme-option" data-theme="amber">
                    <div class="theme-preview theme-preview-amber"></div>
                    <span>Amber</span>
                </button>
                <button class="theme-option" data-theme="teal">
                    <div class="theme-preview theme-preview-teal"></div>
                    <span>Teal</span>
                </button>
                <button class="theme-option" data-theme="crimson">
                    <div class="theme-preview theme-preview-crimson"></div>
                    <span>Crimson</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-wave">
            <svg viewBox="0 0 1440 120" fill="none" xmlns="https://www.w3.org/2000/svg">
                <path d="M0,64L48,58.7C96,53,192,43,288,48C384,53,480,75,576,80C672,85,768,75,864,64C960,53,1056,43,1152,48C1248,53,1344,75,1392,85.3L1440,96L1440,0L1392,0C1344,0,1248,0,1152,0C1056,0,960,0,864,0C768,0,672,0,576,0C480,0,384,0,288,0C192,0,96,0,48,0L0,0Z" fill="var(--primary-color)"/>
            </svg>
        </div>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section footer-brand">
                    <div class="footer-logo">
                        <h4>
                            <i class="fas fa-newspaper footer-icon"></i>
                            Brightlens News
                        </h4>
                        <div class="footer-tagline">Your Gateway to Global News</div>
                    </div>
                    <p>Your trusted source for comprehensive news coverage from multiple reliable sources worldwide. Stay informed with real-time updates.</p>
                    <div class="footer-stats">
                        <div class="stat-item">
                            <div class="stat-number">24/7</div>
                            <div class="stat-label">Coverage</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number">17+</div>
                            <div class="stat-label">Categories</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number">âˆž</div>
                            <div class="stat-label">Stories</div>
                        </div>
                    </div>
                </div>
                <div class="footer-section">
                    <h4><i class="fas fa-list-ul"></i> News Categories</h4>
                    <div class="footer-links">
                        <a href="/latest" data-category="latest" class="footer-link">
                            <i class="fas fa-bolt"></i> Breaking News
                        </a>
                        <a href="/kenya" data-category="kenya" class="footer-link">
                            <i class="fas fa-map-marker-alt"></i> Kenya
                        </a>
                        <a href="/world" data-category="world" class="footer-link">
                            <i class="fas fa-globe"></i> World
                        </a>
                        <a href="/entertainment" data-category="entertainment" class="footer-link">
                            <i class="fas fa-film"></i> Entertainment
                        </a>
                        <a href="/technology" data-category="technology" class="footer-link">
                            <i class="fas fa-microchip"></i> Technology
                        </a>
                        <a href="/business" data-category="business" class="footer-link">
                            <i class="fas fa-chart-line"></i> Business
                        </a>
                        <a href="/sports" data-category="sports" class="footer-link">
                            <i class="fas fa-futbol"></i> Sports
                        </a>
                        <a href="/health" data-category="health" class="footer-link">
                            <i class="fas fa-heartbeat"></i> Health
                        </a>
                        <a href="/crypto" data-category="crypto" class="footer-link">
                            <i class="fas fa-coins"></i> Crypto
                        </a>
                        <a href="/astronomy" data-category="astronomy" class="footer-link">
                            <i class="fas fa-rocket"></i> Astronomy
                        </a>
                    </div>
                </div>
                <div class="footer-section">
                    <h4><i class="fas fa-share-alt"></i> Connect With Us</h4>
                    <div class="social-links">
                        <a href="https://instagram.com/philipkilonzo.ke" target="_blank" rel="noopener noreferrer" class="social-link instagram">
                            <div class="social-icon">
                                <i class="fab fa-instagram"></i>
                            </div>
                            <div class="social-info">
                                <span class="social-platform">Instagram</span>
                                <span class="social-handle">@philipkilonzo.ke</span>
                            </div>
                        </a>
                        <a href="https://wa.me/254791943551" target="_blank" rel="noopener noreferrer" class="social-link whatsapp">
                            <div class="social-icon">
                                <i class="fab fa-whatsapp"></i>
                            </div>
                            <div class="social-info">
                                <span class="social-platform">WhatsApp</span>
                                <span class="social-handle">+254 791 943 551</span>
                            </div>
                        </a>
                    </div>
                    <div class="footer-newsletter">
                        <h5>Stay Updated</h5>
                        <p>Get the latest news delivered to your inbox</p>
                        <div class="newsletter-form">
                            <input type="email" placeholder="Enter your email">
                            <button type="submit">
                                <i class="fas fa-paper-plane"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <div class="footer-bottom-content">
                    <div class="footer-copyright">
                        <p>&copy; 2025 Brightlens News. All rights reserved.</p>
                    </div>
                    <div class="footer-links-bottom">
                        <a href="#">Privacy Policy</a>
                        <a href="#">Terms of Service</a>
                        <a href="#">Contact</a>
                    </div>
                </div>
            </div>
        </div>
        <div class="footer-glow"></div>
    </footer>

    <script src="js/themes.js" defer></script>
    <script src="js/main.js" defer></script>
    <script>
        // Crypto Market Data Manager
        class CryptoMarket {
            constructor() {
                this.apiKey = '9147c63b744e110e899dbdc98cfe5897';
                this.baseUrl = 'https://api.coinlayer.com/live';
                this.coins = ['BTC', 'ETH', 'BNB', 'XRP', 'DOGE', 'SOL', 'ADA', 'TRX', 'MATIC', 'DOT', 'LINK', 'LTC', 'UNI', 'XLM', 'TON'];
                this.coinData = [];
                this.filteredData = [];
                this.chart = null;
                this.refreshInterval = null;
                
                this.coinIcons = {
                    'BTC': 'â‚¿',
                    'ETH': 'âŸ ',
                    'BNB': 'ðŸ’°',
                    'XRP': 'ðŸŒŠ',
                    'DOGE': 'ðŸ•',
                    'SOL': 'â˜€ï¸',
                    'ADA': 'ðŸš€',
                    'TRX': 'ðŸŽ¯',
                    'MATIC': 'ðŸ”·',
                    'DOT': 'âš«',
                    'LINK': 'ðŸ”—',
                    'LTC': 'ðŸª™',
                    'UNI': 'ðŸ¦„',
                    'XLM': 'â­',
                    'TON': 'ðŸ’Ž'
                };
                
                this.coinNames = {
                    'BTC': 'Bitcoin',
                    'ETH': 'Ethereum',
                    'BNB': 'Binance Coin',
                    'XRP': 'Ripple',
                    'DOGE': 'Dogecoin',
                    'SOL': 'Solana',
                    'ADA': 'Cardano',
                    'TRX': 'Tron',
                    'MATIC': 'Polygon',
                    'DOT': 'Polkadot',
                    'LINK': 'Chainlink',
                    'LTC': 'Litecoin',
                    'UNI': 'Uniswap',
                    'XLM': 'Stellar',
                    'TON': 'Toncoin'
                };
                
                this.init();
            }
            
            async init() {
                try {
                    // Load crypto data with faster timeout
                    await this.loadCryptoData();
                    this.setupEventListeners();
                    this.startAutoRefresh();
                    this.initChart();
                } catch (error) {
                    console.error('Error initializing crypto market:', error);
                    // Ensure loading screen is hidden even on error
                    this.hideLoadingScreen();
                }
            }
            
            async loadCryptoData() {
                try {
                    const symbols = this.coins.join(',');
                    const controller = new AbortController();
                    const timeoutId = setTimeout(() => controller.abort(), 3000); // Reduced to 3 seconds for faster loading
                    
                    const response = await fetch(`${this.baseUrl}?access_key=${this.apiKey}&symbols=${symbols}`, {
                        signal: controller.signal
                    });
                    clearTimeout(timeoutId);
                    const data = await response.json();
                    
                    if (data.success) {
                        this.coinData = this.coins.map(symbol => {
                            const price = data.rates[symbol] || 0;
                            // Generate mock 24h change for demo
                            const change = (Math.random() - 0.5) * 20; // -10% to +10%
                            
                            return {
                                symbol,
                                name: this.coinNames[symbol],
                                price: price,
                                change: change,
                                icon: this.coinIcons[symbol],
                                lastUpdated: new Date()
                            };
                        });
                        
                        this.filteredData = [...this.coinData];
                        this.renderCryptoCards();
                        this.updateLastUpdated();
                        // Hide loading screen on success
                        this.hideLoadingScreen();
                    } else {
                        throw new Error(data.error?.info || 'API request failed');
                    }
                } catch (error) {
                    console.error('Error loading crypto data:', error);
                    // Load mock data as fallback
                    this.loadMockData();
                    // Hide loading screen after fallback
                    this.hideLoadingScreen();
                }
            }
            
            loadMockData() {
                this.coinData = this.coins.map(symbol => {
                    // Mock prices based on typical market values
                    const mockPrices = {
                        'BTC': 43250, 'ETH': 2580, 'BNB': 310, 'XRP': 0.52, 'DOGE': 0.085,
                        'SOL': 98, 'ADA': 0.38, 'TRX': 0.11, 'MATIC': 0.82, 'DOT': 6.45,
                        'LINK': 14.2, 'LTC': 73, 'UNI': 6.8, 'XLM': 0.12, 'TON': 2.3
                    };
                    
                    return {
                        symbol,
                        name: this.coinNames[symbol],
                        price: mockPrices[symbol] || Math.random() * 100,
                        change: (Math.random() - 0.5) * 20,
                        icon: this.coinIcons[symbol],
                        lastUpdated: new Date()
                    };
                });
                
                this.filteredData = [...this.coinData];
                this.renderCryptoCards();
                this.updateLastUpdated();
                
                // Show a notification that we're using demo data
                this.showNotification('Using demo data - API connection unavailable', 'info');
            }
            
            renderCryptoCards() {
                const grid = document.getElementById('crypto-grid');
                if (!grid) return;
                
                const isListView = grid.classList.contains('list-view');
                
                grid.innerHTML = this.filteredData.map(coin => {
                    const isPositive = coin.change >= 0;
                    const trendClass = Math.abs(coin.change) > 5 ? (isPositive ? 'trending' : 'declining') : '';
                    const viewClass = isListView ? 'list-view' : '';
                    
                    const priceFormatted = coin.price.toLocaleString('en-US', {
                        minimumFractionDigits: 2, 
                        maximumFractionDigits: 6
                    });
                    
                    const changeFormatted = `${isPositive ? '+' : ''}${coin.change.toFixed(2)}%`;
                    
                    // Generate realistic market data
                    const marketCap = (coin.price * (Math.random() * 1000000000 + 1000000000)).toLocaleString('en-US', {
                        maximumFractionDigits: 0
                    });
                    
                    const volume24h = (Math.random() * 5000000000 + 100000000).toLocaleString('en-US', {
                        maximumFractionDigits: 0
                    });
                    
                    const circulatingSupply = (Math.random() * 1000000000 + 10000000).toLocaleString('en-US', {
                        maximumFractionDigits: 0
                    });
                    
                    // Generate sparkline data points
                    const sparklineData = this.generateSparklineData(coin.price, coin.change);
                    
                    // Get price change direction for arrow
                    const priceDirection = isPositive ? 'â†—' : 'â†˜';
                    const priceColor = isPositive ? '#10b981' : '#ef4444';
                    
                    if (isListView) {
                        return `
                            <div class="crypto-card ${trendClass} ${viewClass}" data-symbol="${coin.symbol}">
                                <div class="crypto-header-card">
                                    <div class="crypto-info">
                                        <div class="crypto-icon">${coin.icon}</div>
                                        <div class="crypto-details">
                                            <h3>${coin.name}</h3>
                                            <span class="crypto-symbol">${coin.symbol}</span>
                                        </div>
                                    </div>
                                    <div class="crypto-change ${isPositive ? 'positive' : 'negative'}">
                                        ${changeFormatted}
                                    </div>
                                </div>
                                <div class="crypto-price">$${priceFormatted}</div>
                                <div class="crypto-meta">
                                    <span>24h Volume</span>
                                    <span>$${volume24h}</span>
                                </div>
                                <div class="crypto-actions">
                                    <button class="action-btn favorite-btn" title="Add to favorites">
                                        <i class="far fa-heart"></i>
                                    </button>
                                    <button class="action-btn chart-btn" title="View detailed chart">
                                        <i class="fas fa-chart-line"></i>
                                    </button>
                                    <button class="action-btn info-btn" title="More info">
                                        <i class="fas fa-info-circle"></i>
                                    </button>
                                </div>
                            </div>
                        `;
                    } else {
                        return `
                            <div class="crypto-card ${trendClass}" data-symbol="${coin.symbol}">
                                <div class="crypto-header-card">
                                    <div class="crypto-info">
                                        <div class="crypto-icon">${coin.icon}</div>
                                        <div class="crypto-details">
                                            <h3>${coin.name}</h3>
                                            <span class="crypto-symbol">${coin.symbol}</span>
                                        </div>
                                    </div>
                                    <div class="crypto-actions">
                                        <button class="action-btn favorite-btn" title="Add to favorites">
                                            <i class="far fa-heart"></i>
                                        </button>
                                        <button class="action-btn chart-btn" title="View detailed chart">
                                            <i class="fas fa-chart-line"></i>
                                        </button>
                                    </div>
                                </div>
                                
                                <div class="crypto-price-section">
                                    <div class="crypto-price">
                                        $${priceFormatted}
                                        <span class="price-direction" style="color: ${priceColor}">${priceDirection}</span>
                                    </div>
                                    <div class="crypto-change ${isPositive ? 'positive' : 'negative'}">
                                        ${changeFormatted}
                                    </div>
                                </div>
                                
                                <div class="crypto-sparkline">
                                    <canvas class="sparkline-chart" width="200" height="40"></canvas>
                                </div>
                                
                                <div class="crypto-stats">
                                    <div class="stat-row">
                                        <span class="stat-label">Market Cap</span>
                                        <span class="stat-value">$${marketCap}</span>
                                    </div>
                                    <div class="stat-row">
                                        <span class="stat-label">24h Volume</span>
                                        <span class="stat-value">$${volume24h}</span>
                                    </div>
                                    <div class="stat-row">
                                        <span class="stat-label">Circulating</span>
                                        <span class="stat-value">${circulatingSupply}</span>
                                    </div>
                                </div>
                                
                                <div class="crypto-footer">
                                    <button class="detail-btn" onclick="showCoinDetails('${coin.symbol}')">
                                        <i class="fas fa-chart-bar"></i>
                                        View Details
                                    </button>
                                    <button class="trade-btn" onclick="openTradeView('${coin.symbol}')">
                                        <i class="fas fa-exchange-alt"></i>
                                        Trade
                                    </button>
                                </div>
                            </div>
                        `;
                    }
                }).join('');
                
                // Initialize sparkline charts after rendering
                this.initSparklineCharts();
            }
            
            generateSparklineData(price, change) {
                const points = 20;
                const data = [];
                const volatility = Math.abs(change) / 100;
                
                for (let i = 0; i < points; i++) {
                    const randomChange = (Math.random() - 0.5) * volatility * 2;
                    const pointPrice = price * (1 + randomChange);
                    data.push(pointPrice);
                }
                
                return data;
            }
            
            initSparklineCharts() {
                const charts = document.querySelectorAll('.sparkline-chart');
                charts.forEach(canvas => {
                    const ctx = canvas.getContext('2d');
                    const card = canvas.closest('.crypto-card');
                    const symbol = card.dataset.symbol;
                    const coin = this.coinData.find(c => c.symbol === symbol);
                    
                    if (coin) {
                        const data = this.generateSparklineData(coin.price, coin.change);
                        const isPositive = coin.change >= 0;
                        
                        // Clear canvas
                        ctx.clearRect(0, 0, canvas.width, canvas.height);
                        
                        // Draw sparkline
                        ctx.strokeStyle = isPositive ? '#10b981' : '#ef4444';
                        ctx.lineWidth = 2;
                        ctx.beginPath();
                        
                        const stepX = canvas.width / (data.length - 1);
                        const minPrice = Math.min(...data);
                        const maxPrice = Math.max(...data);
                        const priceRange = maxPrice - minPrice;
                        
                        data.forEach((price, index) => {
                            const x = index * stepX;
                            const y = canvas.height - ((price - minPrice) / priceRange) * canvas.height;
                            
                            if (index === 0) {
                                ctx.moveTo(x, y);
                            } else {
                                ctx.lineTo(x, y);
                            }
                        });
                        
                        ctx.stroke();
                    }
                });
            }
            
            setupEventListeners() {
                // Search functionality
                const searchInput = document.getElementById('crypto-search');
                if (searchInput) {
                    searchInput.addEventListener('input', (e) => {
                        this.filterCoins(e.target.value, document.getElementById('sort-filter').value);
                    });
                }
                
                // Sort functionality
                const sortFilter = document.getElementById('sort-filter');
                if (sortFilter) {
                    sortFilter.addEventListener('change', (e) => {
                        this.filterCoins(document.getElementById('crypto-search').value, e.target.value);
                    });
                }
                
                // View toggle
                document.querySelectorAll('.view-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        document.querySelectorAll('.view-btn').forEach(b => b.classList.remove('active'));
                        e.target.classList.add('active');
                        this.toggleView(e.target.dataset.view);
                    });
                });
                
                // Refresh button
                const refreshBtn = document.getElementById('refresh-btn');
                if (refreshBtn) {
                    refreshBtn.addEventListener('click', () => {
                        this.refreshData();
                    });
                }
                
                // Chart controls
                document.querySelectorAll('.chart-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        document.querySelectorAll('.chart-btn').forEach(b => b.classList.remove('active'));
                        e.target.classList.add('active');
                        this.updateChart(e.target.dataset.period);
                    });
                });
                
                // Action buttons event delegation
                document.addEventListener('click', (e) => {
                    if (e.target.closest('.action-btn')) {
                        const btn = e.target.closest('.action-btn');
                        const card = btn.closest('.crypto-card');
                        const symbol = card.dataset.symbol;
                        
                        if (btn.classList.contains('favorite-btn')) {
                            this.toggleFavorite(symbol, btn);
                        } else if (btn.classList.contains('chart-btn')) {
                            this.showCoinChart(symbol);
                        } else if (btn.classList.contains('info-btn')) {
                            this.showCoinInfo(symbol);
                        }
                    }
                });
            }
            
            toggleFavorite(symbol, btn) {
                btn.classList.toggle('active');
                const icon = btn.querySelector('i');
                
                if (btn.classList.contains('active')) {
                    icon.className = 'fas fa-heart';
                    this.showNotification(`${symbol} added to favorites`, 'success');
                } else {
                    icon.className = 'far fa-heart';
                    this.showNotification(`${symbol} removed from favorites`, 'info');
                }
            }
            
            showCoinChart(symbol) {
                this.showNotification(`Opening detailed chart for ${symbol}`, 'info');
                // Here you could open a modal with detailed chart
                // For now, just show a notification
            }
            
            showCoinInfo(symbol) {
                this.showNotification(`Loading detailed info for ${symbol}`, 'info');
                // Here you could open a modal with detailed information
                // For now, just show a notification
            }
            
            showNotification(message, type = 'info') {
                // Create notification element
                const notification = document.createElement('div');
                notification.className = `notification notification-${type}`;
                notification.innerHTML = `
                    <i class="fas fa-${type === 'success' ? 'check-circle' : type === 'error' ? 'exclamation-circle' : 'info-circle'}"></i>
                    <span>${message}</span>
                `;
                
                // Add to page
                document.body.appendChild(notification);
                
                // Show notification
                setTimeout(() => notification.classList.add('show'), 100);
                
                // Remove after 3 seconds
                setTimeout(() => {
                    notification.classList.remove('show');
                    setTimeout(() => notification.remove(), 300);
                }, 3000);
            }
            
            toggleView(view) {
                const grid = document.getElementById('crypto-grid');
                if (grid) {
                    grid.classList.remove('grid-view', 'list-view');
                    grid.classList.add(view);
                }
            }
            
            filterCoins(searchTerm, sortOption) {
                let filtered = [...this.coinData];
                
                // Apply search filter
                if (searchTerm) {
                    filtered = filtered.filter(coin => 
                        coin.name.toLowerCase().includes(searchTerm.toLowerCase()) ||
                        coin.symbol.toLowerCase().includes(searchTerm.toLowerCase())
                    );
                }
                
                // Apply sort
                switch (sortOption) {
                    case 'price-high':
                        filtered.sort((a, b) => b.price - a.price);
                        break;
                    case 'price-low':
                        filtered.sort((a, b) => a.price - b.price);
                        break;
                    case 'change-high':
                        filtered.sort((a, b) => b.change - a.change);
                        break;
                    case 'change-low':
                        filtered.sort((a, b) => a.change - b.change);
                        break;
                    case 'name':
                        filtered.sort((a, b) => a.name.localeCompare(b.name));
                        break;
                }
                
                this.filteredData = filtered;
                this.renderCryptoCards();
            }
            
            async refreshData() {
                const refreshBtn = document.getElementById('refresh-btn');
                if (!refreshBtn) return;
                
                refreshBtn.classList.add('loading');
                refreshBtn.disabled = true;
                
                await this.loadCryptoData();
                
                setTimeout(() => {
                    refreshBtn.classList.remove('loading');
                    refreshBtn.disabled = false;
                }, 1000);
            }
            
            startAutoRefresh() {
                this.refreshInterval = setInterval(() => {
                    this.loadCryptoData();
                }, 30000); // Refresh every 30 seconds
            }
            
            updateLastUpdated() {
                const lastUpdatedEl = document.getElementById('last-updated');
                if (lastUpdatedEl) {
                    lastUpdatedEl.textContent = `Last updated: ${new Date().toLocaleString()}`;
                }
            }
            
            initChart() {
                const ctx = document.getElementById('price-chart');
                if (!ctx) return;
                
                // Generate mock historical data
                const labels = [];
                const data = [];
                const basePrice = 43250; // Bitcoin base price
                
                for (let i = 23; i >= 0; i--) {
                    labels.push(`${24 - i}:00`);
                    data.push(basePrice + (Math.random() - 0.5) * 2000);
                }
                
                this.chart = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: labels,
                        datasets: [{
                            label: 'Bitcoin (BTC)',
                            data: data,
                            borderColor: '#f59e0b',
                            backgroundColor: 'rgba(245, 158, 11, 0.1)',
                            borderWidth: 3,
                            fill: true,
                            tension: 0.4,
                            pointRadius: 0,
                            pointHoverRadius: 6
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                display: true,
                                position: 'top'
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: false,
                                grid: {
                                    color: 'rgba(0,0,0,0.1)'
                                },
                                ticks: {
                                    callback: function(value) {
                                        return '$' + value.toLocaleString();
                                    }
                                }
                            },
                            x: {
                                grid: {
                                    color: 'rgba(0,0,0,0.1)'
                                }
                            }
                        },
                        interaction: {
                            intersect: false,
                            mode: 'index'
                        }
                    }
                });
            }
            
            updateChart(period) {
                if (!this.chart) return;
                
                const labels = [];
                const data = [];
                const basePrice = 43250;
                
                let points, labelFormat;
                switch (period) {
                    case '1h':
                        points = 12;
                        labelFormat = (i) => `${new Date(Date.now() - (12 - i) * 5 * 60000).toLocaleTimeString().slice(0, 5)}`;
                        break;
                    case '24h':
                        points = 24;
                        labelFormat = (i) => `${24 - i}:00`;
                        break;
                    case '7d':
                        points = 7;
                        labelFormat = (i) => {
                            const date = new Date();
                            date.setDate(date.getDate() - (7 - i));
                            return date.toLocaleDateString().slice(0, -5);
                        };
                        break;
                }
                
                for (let i = points - 1; i >= 0; i--) {
                    labels.push(labelFormat(points - 1 - i));
                    data.push(basePrice + (Math.random() - 0.5) * 3000);
                }
                
                this.chart.data.labels = labels;
                this.chart.data.datasets[0].data = data;
                this.chart.update();
            }
            
            hideLoadingScreen() {
                const loadingScreen = document.getElementById('loading-screen');
                if (loadingScreen) {
                    loadingScreen.classList.add('hidden');
                    setTimeout(() => {
                        loadingScreen.style.display = 'none';
                    }, 300);
                }
            }
            
            showErrorMessage() {
                const grid = document.getElementById('crypto-grid');
                if (grid) {
                    grid.innerHTML = `
                        <div class="error-message" style="grid-column: 1 / -1;">
                            <i class="fas fa-exclamation-triangle"></i>
                            <h3>Unable to Load Crypto Data</h3>
                            <p>We're having trouble connecting to the cryptocurrency API. Showing demo data instead.</p>
                        </div>
                    `;
                }
                // Hide loading screen when showing error
                this.hideLoadingScreen();
            }
        }
        
        /* Modal and Notification Styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10000;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .modal-overlay.show {
            opacity: 1;
        }
        
        .modal-content {
            background: white;
            border-radius: 16px;
            padding: 2rem;
            max-width: 500px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            transform: scale(0.9);
            transition: transform 0.3s ease;
        }
        
        .modal-overlay.show .modal-content {
            transform: scale(1);
        }
        
        .coin-details-modal h2,
        .trade-view-modal h2 {
            margin-bottom: 1.5rem;
            color: #1f2937;
            font-size: 1.5rem;
        }
        
        .details-grid {
            display: grid;
            gap: 1rem;
            margin-bottom: 2rem;
        }
        
        .detail-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem;
            background: #f9fafb;
            border-radius: 8px;
        }
        
        .detail-item .label {
            font-weight: 500;
            color: #6b7280;
        }
        
        .detail-item .value {
            font-weight: 600;
            color: #1f2937;
        }
        
        .detail-item .value.positive {
            color: #10b981;
        }
        
        .detail-item .value.negative {
            color: #ef4444;
        }
        
        .trade-form {
            margin-bottom: 2rem;
        }
        
        .form-group {
            margin-bottom: 1rem;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: #374151;
        }
        
        .form-group input {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #d1d5db;
            border-radius: 8px;
            font-size: 1rem;
        }
        
        .calculated-amount {
            padding: 0.75rem;
            background: #f3f4f6;
            border-radius: 8px;
            font-weight: 600;
            color: #1f2937;
        }
        
        .trade-actions {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
        }
        
        .buy-btn, .sell-btn {
            flex: 1;
            padding: 0.75rem;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .buy-btn {
            background: #10b981;
            color: white;
        }
        
        .buy-btn:hover {
            background: #059669;
        }
        
        .sell-btn {
            background: #ef4444;
            color: white;
        }
        
        .sell-btn:hover {
            background: #dc2626;
        }
        
        .modal-actions {
            display: flex;
            gap: 1rem;
            justify-content: flex-end;
        }
        
        .modal-actions button {
            padding: 0.75rem 1.5rem;
            border: 1px solid #d1d5db;
            background: white;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .modal-actions button:hover {
            background: #f3f4f6;
        }
        
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: white;
            border-radius: 8px;
            padding: 1rem 1.5rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            display: flex;
            align-items: center;
            gap: 0.75rem;
            z-index: 10001;
            transform: translateX(100%);
            transition: transform 0.3s ease;
        }
        
        .notification.show {
            transform: translateX(0);
        }
        
        .notification-success {
            border-left: 4px solid #10b981;
        }
        
        .notification-error {
            border-left: 4px solid #ef4444;
        }
        
        .notification-info {
            border-left: 4px solid #3b82f6;
        }
        
        .notification i {
            font-size: 1.2rem;
        }
        
        .notification-success i {
            color: #10b981;
        }
        
        .notification-error i {
            color: #ef4444;
        }
        
        .notification-info i {
            color: #3b82f6;
        }
        
        .error-message {
            text-align: center;
            padding: 3rem 2rem;
            background: #fef2f2;
            border: 1px solid #fecaca;
            border-radius: 12px;
            color: #991b1b;
        }
        
        .error-message i {
            font-size: 3rem;
            margin-bottom: 1rem;
            color: #dc2626;
        }
        
        .error-message h3 {
            margin-bottom: 1rem;
            color: #991b1b;
        }
        
        .error-message p {
            color: #7f1d1d;
            line-height: 1.6;
        }
        
        // Global functions for onclick handlers
        function showCoinDetails(symbol) {
            const coin = window.cryptoMarket?.coinData.find(c => c.symbol === symbol);
            if (coin) {
                const details = `
                    <div class="coin-details-modal">
                        <h2>${coin.name} (${coin.symbol})</h2>
                        <div class="details-grid">
                            <div class="detail-item">
                                <span class="label">Current Price</span>
                                <span class="value">$${coin.price.toLocaleString()}</span>
                            </div>
                            <div class="detail-item">
                                <span class="label">24h Change</span>
                                <span class="value ${coin.change >= 0 ? 'positive' : 'negative'}">
                                    ${coin.change >= 0 ? '+' : ''}${coin.change.toFixed(2)}%
                                </span>
                            </div>
                            <div class="detail-item">
                                <span class="label">Market Cap</span>
                                <span class="value">$${(coin.price * 1000000000).toLocaleString()}</span>
                            </div>
                            <div class="detail-item">
                                <span class="label">24h Volume</span>
                                <span class="value">$${(Math.random() * 5000000000).toLocaleString()}</span>
                            </div>
                        </div>
                        <div class="modal-actions">
                            <button onclick="closeModal()">Close</button>
                            <button onclick="openTradeView('${symbol}')">Trade Now</button>
                        </div>
                    </div>
                `;
                
                showModal(details);
            }
        }
        
        function openTradeView(symbol) {
            const coin = window.cryptoMarket?.coinData.find(c => c.symbol === symbol);
            if (coin) {
                const tradeView = `
                    <div class="trade-view-modal">
                        <h2>Trade ${coin.name}</h2>
                        <div class="trade-form">
                            <div class="form-group">
                                <label>Amount (USD)</label>
                                <input type="number" id="trade-amount" placeholder="Enter amount">
                            </div>
                            <div class="form-group">
                                <label>You'll receive</label>
                                <div class="calculated-amount">
                                    <span id="calculated-coins">0</span> ${coin.symbol}
                                </div>
                            </div>
                            <div class="trade-actions">
                                <button class="buy-btn">Buy ${coin.symbol}</button>
                                <button class="sell-btn">Sell ${coin.symbol}</button>
                            </div>
                        </div>
                        <div class="modal-actions">
                            <button onclick="closeModal()">Cancel</button>
                        </div>
                    </div>
                `;
                
                showModal(tradeView);
                
                // Add real-time calculation
                const amountInput = document.getElementById('trade-amount');
                const calculatedCoins = document.getElementById('calculated-coins');
                
                if (amountInput && calculatedCoins) {
                    amountInput.addEventListener('input', (e) => {
                        const amount = parseFloat(e.target.value) || 0;
                        const coins = amount / coin.price;
                        calculatedCoins.textContent = coins.toFixed(6);
                    });
                }
            }
        }
        
        function showModal(content) {
            const modal = document.createElement('div');
            modal.className = 'modal-overlay';
            modal.innerHTML = `
                <div class="modal-content">
                    ${content}
                </div>
            `;
            
            document.body.appendChild(modal);
            setTimeout(() => modal.classList.add('show'), 100);
        }
        
        function closeModal() {
            const modal = document.querySelector('.modal-overlay');
            if (modal) {
                modal.classList.remove('show');
                setTimeout(() => modal.remove(), 300);
            }
        }
        
        // Initialize crypto market when DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize crypto market
            window.cryptoMarket = new CryptoMarket();
            
            // Hide loading screen after 1.5 seconds maximum (faster like food category)
            setTimeout(() => {
                const loadingScreen = document.getElementById('loading-screen');
                if (loadingScreen && loadingScreen.style.display !== 'none') {
                    loadingScreen.classList.add('hidden');
                    setTimeout(() => {
                        loadingScreen.style.display = 'none';
                    }, 300);
                }
            }, 1500);
        });
    </script>
</body>
</html>