<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>📡 Live TV Streaming - Brightlens News</title>
    <meta name="description" content="Watch live news channels streaming 24/7. CNN, BBC, Al Jazeera, Citizen TV, KTN News, NTV Kenya, and more premium channels with HD quality.">
    
    <!-- Preload critical resources -->
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" as="style">
    <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" as="style">
    
    <!-- Critical CSS inline for faster loading -->
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        :root {
            /* Modern Color System */
            --primary-blue: #3b82f6;
            --primary-blue-dark: #1d4ed8;
            --secondary-purple: #8b5cf6;
            --accent-orange: #f97316;
            --accent-red: #dc2626;
            --success-green: #16a34a;
            
            /* Background & Surfaces */
            --bg-primary: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --bg-secondary: rgba(255, 255, 255, 0.95);
            --surface-color: #1e293b;
            --card-color: #334155;
            
            /* Text Colors */
            --text-primary: #f8fafc;
            --text-secondary: #cbd5e1;
            --text-muted: #94a3b8;
            
            /* Glass Effects */
            --glass-bg: rgba(255, 255, 255, 0.1);
            --glass-bg-strong: rgba(255, 255, 255, 0.2);
            --glass-border: rgba(255, 255, 255, 0.2);
            --backdrop-blur: blur(20px);
            
            /* Shadows */
            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
            
            /* Spacing */
            --space-xs: 0.5rem;
            --space-sm: 1rem;
            --space-md: 1.5rem;
            --space-lg: 2rem;
            --space-xl: 3rem;
            
            /* Border Radius */
            --radius-sm: 8px;
            --radius-md: 12px;
            --radius-lg: 16px;
            --radius-xl: 20px;
            
            /* Transitions */
            --transition-fast: 0.15s ease;
            --transition-normal: 0.3s ease;
            --transition-slow: 0.5s ease;
        }
        
        [data-theme="dark"] {
            --bg-primary: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            --bg-secondary: rgba(15, 23, 42, 0.95);
            --glass-bg: rgba(15, 23, 42, 0.3);
            --glass-bg-strong: rgba(15, 23, 42, 0.5);
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            line-height: 1.6;
            color: var(--text-primary);
            overflow-x: hidden;
            min-height: 100vh;
            position: relative;
        }
        
        .tv-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: var(--bg-primary);
            background-size: 400% 400%;
            animation: gradientShift 20s ease infinite;
            z-index: -2;
        }
        
        @keyframes gradientShift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }
        
        .background-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(2px);
            z-index: -1;
        }
        
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--surface-color);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            transition: opacity 0.5s ease;
        }
        
        .loading-spinner {
            width: 60px;
            height: 60px;
            border: 4px solid var(--glass-border);
            border-top: 4px solid var(--primary-blue);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .header {
            background: var(--glass-bg);
            backdrop-filter: var(--backdrop-blur);
            border-bottom: 1px solid var(--glass-border);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 var(--space-sm);
        }
        
        .hidden {
            opacity: 0;
            visibility: hidden;
        }
        
        .glass-card {
            background: var(--glass-bg);
            backdrop-filter: var(--backdrop-blur);
            border: 1px solid var(--glass-border);
            border-radius: var(--radius-xl);
            box-shadow: var(--shadow-lg);
            transition: all var(--transition-normal);
            position: relative;
            overflow: hidden;
        }
        
        .glass-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
        }

        /* Video Player Overlay */
        .video-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(0, 0, 0, 0.95);
            backdrop-filter: blur(10px);
            z-index: 1000;
            display: none;
            align-items: center;
            justify-content: center;
            animation: fadeIn 0.3s ease;
        }

        .video-overlay.active {
            display: flex;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .video-player-container {
            width: 90%;
            max-width: 1200px;
            background: var(--glass-bg);
            border-radius: var(--radius-xl);
            padding: var(--space-lg);
            backdrop-filter: var(--backdrop-blur);
            border: 1px solid var(--glass-border);
            position: relative;
        }

        @media (max-width: 768px) {
            .video-player-container {
                width: 95%;
                padding: var(--space-sm);
            }
        }
    </style>
    
    <!-- Non-critical CSS -->
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/themes.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
</head>
<body>
    <!-- Background -->
    <div class="tv-background">
        <div class="background-overlay"></div>
    </div>

    <!-- Loading Screen -->
    <div id="loading-screen" class="loading-screen">
        <div style="text-align: center; color: var(--text-primary);">
            <div class="loading-spinner"></div>
            <h3 style="margin-top: var(--space-sm); font-weight: 600;">Loading Live TV...</h3>
            <p style="color: var(--text-secondary); margin-top: var(--space-xs);">Preparing your streaming experience</p>
        </div>
    </div>

    <!-- Header -->
    <header class="header">
        <div class="container">
            <div style="display: flex; justify-content: space-between; align-items: center; padding: var(--space-sm) 0;">
                <div style="display: flex; align-items: center; gap: var(--space-sm);">
                    <a href="index.html" style="color: var(--text-secondary); text-decoration: none; display: flex; align-items: center; gap: var(--space-xs); font-size: 0.9rem; transition: color var(--transition-fast); border-radius: var(--radius-sm); padding: var(--space-xs);">
                        <i class="fas fa-arrow-left"></i>
                        <span>Back to News</span>
                    </a>
                    <div style="height: 20px; width: 1px; background: var(--glass-border);"></div>
                    <h1 style="font-size: 1.5rem; font-weight: 700; background: var(--bg-primary); -webkit-background-clip: text; -webkit-text-fill-color: transparent; display: flex; align-items: center; gap: var(--space-xs);">
                        <i class="fas fa-broadcast-tower" style="color: var(--accent-red);"></i>
                        📡 Live TV Streaming
                    </h1>
                </div>
                
                <div style="display: flex; align-items: center; gap: var(--space-sm);">
                    <select id="themeSelect" style="background: var(--glass-bg); color: var(--text-primary); border: 1px solid var(--glass-border); border-radius: var(--radius-sm); padding: var(--space-xs); font-size: 0.875rem;">
                        <option value="default">Default Theme</option>
                        <option value="dark">Dark Theme</option>
                        <option value="blue">Blue Theme</option>
                    </select>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main style="padding: var(--space-lg) 0; min-height: calc(100vh - 200px);">
        <div class="container">
            <!-- Hero Section -->
            <section style="text-align: center; margin-bottom: var(--space-xl);">
                <h2 style="font-size: 3rem; font-weight: 800; margin-bottom: var(--space-sm); background: var(--bg-primary); -webkit-background-clip: text; -webkit-text-fill-color: transparent; line-height: 1.2;">
                    📡 Watch Live News Now
                </h2>
                <p style="font-size: 1.25rem; color: var(--text-secondary); max-width: 600px; margin: 0 auto; line-height: 1.6;">
                    Stream premium news channels in HD quality with instant playback. No ads, no delays.
                </p>
            </section>

            <!-- Search Section -->
            <section class="glass-card" style="margin-bottom: var(--space-xl); padding: var(--space-lg);">
                <div style="display: flex; align-items: center; gap: var(--space-sm); margin-bottom: var(--space-md);">
                    <i class="fas fa-search" style="color: var(--text-muted);"></i>
                    <input type="text" id="channel-search" placeholder="Search channels..." style="flex: 1; background: var(--glass-bg); border: 1px solid var(--glass-border); border-radius: var(--radius-md); padding: var(--space-sm); color: var(--text-primary); font-size: 1rem;">
                    <button id="filter-btn" style="background: var(--primary-blue); color: white; border: none; border-radius: var(--radius-md); padding: var(--space-sm) var(--space-md); cursor: pointer; transition: all var(--transition-fast);">
                        <i class="fas fa-filter"></i>
                        Filter
                    </button>
                </div>
                
                <!-- Quick Filter Tags -->
                <div style="display: flex; flex-wrap: wrap; gap: var(--space-xs);">
                    <button class="filter-tag active" data-category="all" style="background: var(--primary-blue); color: white; border: none; border-radius: 20px; padding: var(--space-xs) var(--space-sm); font-size: 0.875rem; cursor: pointer; transition: all var(--transition-fast);">
                        All Channels
                    </button>
                    <button class="filter-tag" data-category="news" style="background: var(--glass-bg); color: var(--text-primary); border: 1px solid var(--glass-border); border-radius: 20px; padding: var(--space-xs) var(--space-sm); font-size: 0.875rem; cursor: pointer; transition: all var(--transition-fast);">
                        News
                    </button>
                    <button class="filter-tag" data-category="international" style="background: var(--glass-bg); color: var(--text-primary); border: 1px solid var(--glass-border); border-radius: 20px; padding: var(--space-xs) var(--space-sm); font-size: 0.875rem; cursor: pointer; transition: all var(--transition-fast);">
                        International
                    </button>
                    <button class="filter-tag" data-category="local" style="background: var(--glass-bg); color: var(--text-primary); border: 1px solid var(--glass-border); border-radius: 20px; padding: var(--space-xs) var(--space-sm); font-size: 0.875rem; cursor: pointer; transition: all var(--transition-fast);">
                        Local Kenya
                    </button>
                    <button class="filter-tag" data-category="documentary" style="background: var(--glass-bg); color: var(--text-primary); border: 1px solid var(--glass-border); border-radius: 20px; padding: var(--space-xs) var(--space-sm); font-size: 0.875rem; cursor: pointer; transition: all var(--transition-fast);">
                        Documentary
                    </button>
                </div>
            </section>

            <!-- Channels Grid -->
            <section style="margin-bottom: var(--space-xl);">
                <div id="channels-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: var(--space-md); justify-items: center;">
                    <!-- Channel cards will be inserted here by JavaScript -->
                </div>
            </section>
        </div>
    </main>

    <!-- Video Player Overlay -->
    <div id="video-overlay" class="video-overlay">
        <div class="video-player-container">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--space-md);">
                <div style="display: flex; align-items: center; gap: var(--space-sm);">
                    <img id="current-channel-logo" src="" alt="" style="width: 50px; height: 50px; border-radius: var(--radius-sm); object-fit: contain; background: white; padding: 4px;">
                    <div>
                        <h3 id="current-channel" style="font-size: 1.5rem; font-weight: 700; margin-bottom: 4px; color: var(--text-primary);">Channel Name</h3>
                        <p id="current-category" style="font-size: 1rem; color: var(--text-secondary);">Category</p>
                    </div>
                </div>
                <div style="display: flex; align-items: center; gap: var(--space-sm);">
                    <div style="display: flex; align-items: center; gap: var(--space-xs); padding: var(--space-xs) var(--space-sm); background: var(--glass-bg); border-radius: 20px; border: 1px solid var(--glass-border);">
                        <div style="width: 8px; height: 8px; background: var(--accent-red); border-radius: 50%; animation: pulse 2s infinite;"></div>
                        <span style="font-size: 0.875rem; color: var(--text-secondary); font-weight: 600;">LIVE</span>
                    </div>
                    <button id="fullscreen-btn" style="background: var(--glass-bg); color: var(--text-primary); border: 1px solid var(--glass-border); border-radius: var(--radius-sm); padding: var(--space-sm); cursor: pointer; transition: all var(--transition-fast);">
                        <i class="fas fa-expand"></i>
                    </button>
                    <button id="close-player" style="background: var(--accent-red); color: white; border: none; border-radius: var(--radius-sm); padding: var(--space-sm) var(--space-md); cursor: pointer; font-size: 0.875rem; font-weight: 600; transition: all var(--transition-fast);">
                        <i class="fas fa-times"></i> Close
                    </button>
                </div>
            </div>
            
            <div id="video-container" style="position: relative; width: 100%; height: 0; padding-bottom: 56.25%; border-radius: var(--radius-lg); overflow: hidden; background: #000; box-shadow: var(--shadow-xl);">
                <iframe id="youtube-player" 
                        style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: none;"
                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                        allowfullscreen>
                </iframe>
                <div id="player-loading" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); color: white; text-align: center; display: block;">
                    <div class="loading-spinner" style="width: 40px; height: 40px; margin: 0 auto var(--space-sm);"></div>
                    <p>Loading stream...</p>
                </div>
            </div>
            
            <div style="display: flex; justify-content: center; gap: var(--space-sm); margin-top: var(--space-md); flex-wrap: wrap;">
                <button id="prev-channel" style="background: var(--glass-bg); color: var(--text-primary); border: 1px solid var(--glass-border); border-radius: var(--radius-md); padding: var(--space-sm) var(--space-md); cursor: pointer; transition: all var(--transition-fast); display: flex; align-items: center; gap: var(--space-xs);">
                    <i class="fas fa-chevron-left"></i> Previous
                </button>
                <button id="quality-toggle" style="background: var(--glass-bg); color: var(--text-primary); border: 1px solid var(--glass-border); border-radius: var(--radius-md); padding: var(--space-sm) var(--space-md); cursor: pointer; transition: all var(--transition-fast);">
                    <i class="fas fa-cog"></i> Quality
                </button>
                <button id="next-channel" style="background: var(--glass-bg); color: var(--text-primary); border: 1px solid var(--glass-border); border-radius: var(--radius-md); padding: var(--space-sm) var(--space-md); cursor: pointer; transition: all var(--transition-fast); display: flex; align-items: center; gap: var(--space-xs);">
                    Next <i class="fas fa-chevron-right"></i>
                </button>
            </div>
        </div>
    </div>

    <!-- Scroll to Top Button -->
    <button id="scroll-top" style="position: fixed; bottom: var(--space-lg); right: var(--space-lg); width: 50px; height: 50px; background: var(--primary-blue); color: white; border: none; border-radius: 50%; cursor: pointer; display: none; z-index: 1000; transition: all var(--transition-fast); box-shadow: var(--shadow-lg);">
        <i class="fas fa-arrow-up"></i>
    </button>

    <!-- Footer -->
    <footer style="background: var(--glass-bg); backdrop-filter: var(--backdrop-blur); border-top: 1px solid var(--glass-border); padding: var(--space-lg) 0; margin-top: var(--space-xl);">
        <div class="container">
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: var(--space-lg); margin-bottom: var(--space-lg);">
                <div>
                    <h4 style="font-size: 1.125rem; font-weight: 600; margin-bottom: var(--space-sm);">Brightlens Live TV</h4>
                    <p style="color: var(--text-secondary); line-height: 1.6;">
                        Watch premium news channels streaming live 24/7. High-quality video and audio with instant playback.
                    </p>
                </div>
                <div>
                    <h4 style="font-size: 1.125rem; font-weight: 600; margin-bottom: var(--space-sm);">Features</h4>
                    <ul style="list-style: none; color: var(--text-secondary); line-height: 1.8;">
                        <li><i class="fas fa-check" style="color: var(--success-green); margin-right: var(--space-xs);"></i> HD Quality Streaming</li>
                        <li><i class="fas fa-check" style="color: var(--success-green); margin-right: var(--space-xs);"></i> No Ads or Interruptions</li>
                        <li><i class="fas fa-check" style="color: var(--success-green); margin-right: var(--space-xs);"></i> Mobile Responsive</li>
                        <li><i class="fas fa-check" style="color: var(--success-green); margin-right: var(--space-xs);"></i> Fast Channel Switching</li>
                    </ul>
                </div>
                <div>
                    <h4 style="font-size: 1.125rem; font-weight: 600; margin-bottom: var(--space-sm);">Connect With Us</h4>
                    <div style="display: flex; flex-direction: column; gap: var(--space-xs);">
                        <a href="https://instagram.com/philipkilonzo.ke" target="_blank" style="color: var(--text-secondary); text-decoration: none; display: flex; align-items: center; gap: var(--space-xs); transition: color var(--transition-fast); padding: var(--space-xs); border-radius: var(--radius-sm);">
                            <i class="fab fa-instagram"></i>
                            @philipkilonzo.ke
                        </a>
                        <a href="https://wa.me/254791943551" target="_blank" style="color: var(--text-secondary); text-decoration: none; display: flex; align-items: center; gap: var(--space-xs); transition: color var(--transition-fast); padding: var(--space-xs); border-radius: var(--radius-sm);">
                            <i class="fab fa-whatsapp"></i>
                            +254 791 943 551
                        </a>
                    </div>
                </div>
            </div>
            <div style="text-align: center; padding-top: var(--space-lg); border-top: 1px solid var(--glass-border); color: var(--text-secondary);">
                <p>&copy; 2025 Brightlens News - Live TV Streaming. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- JavaScript -->
    <script>
        // Enhanced channel data with proper logos and improved URLs
        const channels = [
            {
                id: 'cnn-live',
                name: 'CNN International',
                description: 'Breaking news and analysis from CNN International',
                logo: 'https://upload.wikimedia.org/wikipedia/commons/thumb/6/66/CNN_International_logo.svg/120px-CNN_International_logo.svg.png',
                fallbackLogo: '📰',
                category: 'International News',
                url: 'https://www.youtube.com/embed/XOacA3RYrXk',
                quality: 'HD',
                language: 'English',
                type: 'news'
            },
            {
                id: 'bbc-news',
                name: 'BBC News',
                description: 'BBC World Service Live',
                logo: 'https://upload.wikimedia.org/wikipedia/commons/thumb/7/75/BBC_News_red_logo.svg/120px-BBC_News_red_logo.svg.png',
                fallbackLogo: '🇬🇧',
                category: 'International News',
                url: 'https://www.youtube.com/embed/9Auq9mYxFEE',
                quality: 'HD',
                language: 'English',
                type: 'news'
            },
            {
                id: 'al-jazeera',
                name: 'Al Jazeera English',
                description: 'Breaking news and analysis from around the world',
                logo: 'https://upload.wikimedia.org/wikipedia/en/thumb/f/f2/Aljazeera_eng.svg/120px-Aljazeera_eng.svg.png',
                fallbackLogo: '🌍',
                category: 'International News',
                url: 'https://www.youtube.com/embed/gCNeDWCI0vo',
                quality: 'HD',
                language: 'English',
                type: 'news'
            },
            {
                id: 'citizen-tv',
                name: 'Citizen TV Kenya',
                description: 'Kenya\'s leading television station',
                logo: 'https://upload.wikimedia.org/wikipedia/commons/thumb/8/86/Citizen_TV_logo.png/120px-Citizen_TV_logo.png',
                fallbackLogo: '🇰🇪',
                category: 'Local News',
                url: 'https://www.youtube.com/embed/gzw1hoiBK6Q',
                quality: 'HD',
                language: 'English/Swahili',
                type: 'local'
            },
            {
                id: 'ktn-news',
                name: 'KTN News',
                description: 'Kenya Television Network News',
                logo: 'https://upload.wikimedia.org/wikipedia/commons/thumb/c/c5/KTN_logo.png/120px-KTN_logo.png',
                fallbackLogo: '📺',
                category: 'Local News',
                url: 'https://www.youtube.com/embed/Au1KkxlGvGs',
                quality: 'HD',
                language: 'English/Swahili',
                type: 'local'
            },
            {
                id: 'ntv-kenya',
                name: 'NTV Kenya',
                description: 'Nation Television - Premier news and entertainment',
                logo: 'https://upload.wikimedia.org/wikipedia/commons/thumb/1/1c/NTV_%28Kenya%29_logo.svg/120px-NTV_%28Kenya%29_logo.svg.png',
                fallbackLogo: '🏛️',
                category: 'Local News',
                url: 'https://www.youtube.com/embed/74t0979nG6U',
                quality: 'HD',
                language: 'English/Swahili',
                type: 'local'
            },
            {
                id: 'france24',
                name: 'France 24 English',
                description: 'French international news channel',
                logo: 'https://upload.wikimedia.org/wikipedia/commons/thumb/8/8a/France24.svg/120px-France24.svg.png',
                fallbackLogo: '🇫🇷',
                category: 'International News',
                url: 'https://www.youtube.com/embed/tkDUSbvSExg',
                quality: 'HD',
                language: 'English',
                type: 'international'
            },
            {
                id: 'dw-news',
                name: 'DW News',
                description: 'Deutsche Welle - German international broadcaster',
                logo: 'https://upload.wikimedia.org/wikipedia/commons/thumb/7/75/Deutsche_Welle_symbol_2012.svg/120px-Deutsche_Welle_symbol_2012.svg.png',
                fallbackLogo: '🇩🇪',
                category: 'International News',
                url: 'https://www.youtube.com/embed/pqabxBKzZ6M',
                quality: 'HD',
                language: 'English',
                type: 'international'
            },
            {
                id: 'euronews',
                name: 'Euronews',
                description: 'European perspective on world news',
                logo: 'https://upload.wikimedia.org/wikipedia/commons/thumb/c/c5/Euronews_2016_logo.svg/120px-Euronews_2016_logo.svg.png',
                fallbackLogo: '🇪🇺',
                category: 'International News',
                url: 'https://www.youtube.com/embed/pykz0DEwvUs',
                quality: 'HD',
                language: 'English',
                type: 'international'
            },
            {
                id: 'nat-geo',
                name: 'National Geographic',
                description: 'Explore the world with National Geographic',
                logo: 'https://upload.wikimedia.org/wikipedia/commons/thumb/f/fc/Natgeologo.svg/120px-Natgeologo.svg.png',
                fallbackLogo: '🌎',
                category: 'Documentary',
                url: 'https://www.youtube.com/embed/Cy0s_bxzqkw',
                quality: 'HD',
                language: 'English',
                type: 'documentary'
            },
            {
                id: 'love-nature',
                name: 'Love Nature',
                description: 'Stunning 4K nature documentaries',
                logo: 'https://upload.wikimedia.org/wikipedia/commons/thumb/b/b5/Love_Nature_logo.svg/120px-Love_Nature_logo.svg.png',
                fallbackLogo: '🌿',
                category: 'Nature & Wildlife',
                url: 'https://www.youtube.com/embed/daqB3i9WYIY',
                quality: '4K',
                language: 'English',
                type: 'documentary'
            },
            {
                id: 'sky-news',
                name: 'Sky News',
                description: 'Latest breaking news from Sky News',
                logo: 'https://upload.wikimedia.org/wikipedia/en/thumb/9/9a/Sky_News_logo.svg/120px-Sky_News_logo.svg.png',
                fallbackLogo: '☁️',
                category: 'International News',
                url: 'https://www.youtube.com/embed/9Auq9mYxFEE',
                quality: 'HD',
                language: 'English',
                type: 'international'
            }
        ];

        let currentChannelIndex = 0;
        let filteredChannels = [...channels];

        // DOM Elements
        const channelsGrid = document.getElementById('channels-grid');
        const videoOverlay = document.getElementById('video-overlay');
        const youtubePlayer = document.getElementById('youtube-player');
        const currentChannelElement = document.getElementById('current-channel');
        const currentCategoryElement = document.getElementById('current-category');
        const currentChannelLogo = document.getElementById('current-channel-logo');
        const playerLoading = document.getElementById('player-loading');
        const closePlayerBtn = document.getElementById('close-player');
        const prevChannelBtn = document.getElementById('prev-channel');
        const nextChannelBtn = document.getElementById('next-channel');
        const fullscreenBtn = document.getElementById('fullscreen-btn');
        const scrollTopBtn = document.getElementById('scroll-top');
        const loadingScreen = document.getElementById('loading-screen');
        const channelSearch = document.getElementById('channel-search');
        const filterTags = document.querySelectorAll('.filter-tag');

        // Initialize the app
        function init() {
            renderChannels();
            setupEventListeners();
            
            // Hide loading screen after content loads
            setTimeout(() => {
                loadingScreen.classList.add('hidden');
            }, 1500);
        }

        // Render channel cards with improved design
        function renderChannels() {
            channelsGrid.innerHTML = filteredChannels.map((channel, index) => `
                <div class="channel-card glass-card" data-index="${index}" style="
                    padding: var(--space-md);
                    cursor: pointer;
                    transition: all var(--transition-normal);
                    max-width: 380px;
                    width: 100%;
                " onmouseover="this.style.transform='translateY(-8px)'; this.style.boxShadow='var(--shadow-xl)'" 
                   onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='var(--shadow-lg)'">
                    
                    <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: var(--space-md);">
                        <div style="display: flex; align-items: center; gap: var(--space-sm);">
                            <div style="position: relative; width: 60px; height: 60px; border-radius: var(--radius-md); overflow: hidden; background: white; display: flex; align-items: center; justify-content: center; box-shadow: var(--shadow-sm);">
                                <img src="${channel.logo}" alt="${channel.name}" 
                                     style="width: 100%; height: 100%; object-fit: contain; padding: 4px;"
                                     onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                                <div style="display: none; font-size: 2rem; align-items: center; justify-content: center; width: 100%; height: 100%;">${channel.fallbackLogo}</div>
                            </div>
                            <div>
                                <h3 style="font-size: 1.125rem; font-weight: 600; margin-bottom: 0.25rem; color: var(--text-primary);">${channel.name}</h3>
                                <span style="font-size: 0.75rem; color: var(--text-secondary); background: var(--glass-bg); padding: 0.25rem 0.5rem; border-radius: 12px; border: 1px solid var(--glass-border);">${channel.category}</span>
                            </div>
                        </div>
                        <div style="display: flex; flex-direction: column; align-items: flex-end; gap: 0.25rem;">
                            <span style="font-size: 0.75rem; color: var(--accent-red); font-weight: 600; display: flex; align-items: center; gap: 0.25rem; background: rgba(220, 38, 38, 0.1); padding: 0.25rem 0.5rem; border-radius: 12px;">
                                <div style="width: 6px; height: 6px; background: var(--accent-red); border-radius: 50%; animation: pulse 2s infinite;"></div>
                                LIVE
                            </span>
                            <span style="font-size: 0.75rem; color: var(--text-secondary); background: var(--glass-bg); padding: 0.25rem 0.5rem; border-radius: 12px;">${channel.quality}</span>
                        </div>
                    </div>
                    
                    <p style="color: var(--text-secondary); font-size: 0.875rem; margin-bottom: var(--space-md); line-height: 1.5;">${channel.description}</p>
                    
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div style="display: flex; flex-direction: column; gap: 0.25rem;">
                            <span style="font-size: 0.75rem; color: var(--text-secondary);">
                                <i class="fas fa-globe" style="margin-right: 4px;"></i>
                                ${channel.language}
                            </span>
                            <span style="font-size: 0.75rem; color: var(--text-secondary);">
                                <i class="fas fa-signal" style="margin-right: 4px;"></i>
                                ${channel.quality} Quality
                            </span>
                        </div>
                        <button style="
                            background: var(--primary-blue);
                            color: white;
                            border: none;
                            border-radius: var(--radius-md);
                            padding: var(--space-sm) var(--space-md);
                            font-size: 0.875rem;
                            font-weight: 600;
                            cursor: pointer;
                            transition: all var(--transition-fast);
                            display: flex;
                            align-items: center;
                            gap: var(--space-xs);
                            box-shadow: var(--shadow-sm);
                        " onmouseover="this.style.background='var(--primary-blue-dark)'; this.style.transform='scale(1.05)'" 
                           onmouseout="this.style.background='var(--primary-blue)'; this.style.transform='scale(1)'">
                            <i class="fas fa-play"></i>
                            Watch Now
                        </button>
                    </div>
                </div>
            `).join('');
        }

        // Enhanced event listeners
        function setupEventListeners() {
            // Channel selection - immediately open video player
            channelsGrid.addEventListener('click', (e) => {
                const channelCard = e.target.closest('.channel-card');
                if (channelCard) {
                    const index = parseInt(channelCard.dataset.index);
                    playChannel(index);
                }
            });

            // Search functionality
            channelSearch.addEventListener('input', (e) => {
                const searchTerm = e.target.value.toLowerCase();
                filterChannels(searchTerm, getActiveFilter());
            });

            // Filter tags
            filterTags.forEach(tag => {
                tag.addEventListener('click', () => {
                    filterTags.forEach(t => {
                        t.classList.remove('active');
                        t.style.background = 'var(--glass-bg)';
                        t.style.color = 'var(--text-primary)';
                    });
                    tag.classList.add('active');
                    tag.style.background = 'var(--primary-blue)';
                    tag.style.color = 'white';
                    
                    const category = tag.dataset.category;
                    filterChannels(channelSearch.value.toLowerCase(), category);
                });
            });

            // Player controls
            closePlayerBtn.addEventListener('click', closePlayer);
            prevChannelBtn.addEventListener('click', () => playChannel(currentChannelIndex - 1));
            nextChannelBtn.addEventListener('click', () => playChannel(currentChannelIndex + 1));
            
            // Fullscreen toggle
            fullscreenBtn.addEventListener('click', toggleFullscreen);

            // Close player when clicking outside
            videoOverlay.addEventListener('click', (e) => {
                if (e.target === videoOverlay) {
                    closePlayer();
                }
            });

            // Scroll to top
            window.addEventListener('scroll', () => {
                if (window.scrollY > 300) {
                    scrollTopBtn.style.display = 'block';
                } else {
                    scrollTopBtn.style.display = 'none';
                }
            });

            scrollTopBtn.addEventListener('click', () => {
                window.scrollTo({ top: 0, behavior: 'smooth' });
            });

            // Theme selector
            const themeSelect = document.getElementById('themeSelect');
            themeSelect.addEventListener('change', (e) => {
                document.body.setAttribute('data-theme', e.target.value);
                localStorage.setItem('selectedTheme', e.target.value);
            });

            // Load saved theme
            const savedTheme = localStorage.getItem('selectedTheme') || 'default';
            themeSelect.value = savedTheme;
            document.body.setAttribute('data-theme', savedTheme);

            // Keyboard shortcuts
            document.addEventListener('keydown', (e) => {
                if (videoOverlay.classList.contains('active')) {
                    if (e.key === 'Escape') closePlayer();
                    if (e.key === 'ArrowLeft') playChannel(currentChannelIndex - 1);
                    if (e.key === 'ArrowRight') playChannel(currentChannelIndex + 1);
                    if (e.key === 'f' || e.key === 'F') toggleFullscreen();
                }
            });
        }

        // Filter channels
        function filterChannels(searchTerm, category) {
            filteredChannels = channels.filter(channel => {
                const matchesSearch = channel.name.toLowerCase().includes(searchTerm) || 
                                    channel.description.toLowerCase().includes(searchTerm) ||
                                    channel.category.toLowerCase().includes(searchTerm);
                const matchesCategory = category === 'all' || channel.type === category;
                return matchesSearch && matchesCategory;
            });
            renderChannels();
        }

        // Get active filter
        function getActiveFilter() {
            const activeTag = document.querySelector('.filter-tag.active');
            return activeTag ? activeTag.dataset.category : 'all';
        }

        // Enhanced play channel function - immediate video player
        function playChannel(index) {
            if (index < 0) index = filteredChannels.length - 1;
            if (index >= filteredChannels.length) index = 0;
            
            currentChannelIndex = index;
            const channel = filteredChannels[index];
            
            // Show video overlay immediately
            videoOverlay.classList.add('active');
            document.body.style.overflow = 'hidden'; // Prevent background scrolling
            
            // Show loading
            playerLoading.style.display = 'block';
            
            // Update player info
            const embedUrl = `${channel.url}?autoplay=1&mute=0&controls=1&rel=0&modestbranding=1&playsinline=1`;
            youtubePlayer.src = embedUrl;
            currentChannelElement.textContent = channel.name;
            currentCategoryElement.textContent = channel.category;
            
            // Update logo
            currentChannelLogo.src = channel.logo;
            currentChannelLogo.onerror = function() {
                this.style.display = 'none';
                const fallback = document.createElement('div');
                fallback.textContent = channel.fallbackLogo;
                fallback.style.cssText = 'width: 50px; height: 50px; display: flex; align-items: center; justify-content: center; font-size: 2rem; background: white; border-radius: var(--radius-sm);';
                this.parentNode.insertBefore(fallback, this.nextSibling);
            };
            
            // Hide loading after delay
            setTimeout(() => {
                playerLoading.style.display = 'none';
            }, 2000);
        }

        // Close player
        function closePlayer() {
            youtubePlayer.src = '';
            videoOverlay.classList.remove('active');
            document.body.style.overflow = 'auto'; // Restore scrolling
        }

        // Toggle fullscreen
        function toggleFullscreen() {
            const videoContainer = document.getElementById('video-container');
            if (!document.fullscreenElement) {
                videoContainer.requestFullscreen().catch(err => {
                    console.log(`Error attempting to enable fullscreen: ${err.message}`);
                });
                fullscreenBtn.innerHTML = '<i class="fas fa-compress"></i>';
            } else {
                document.exitFullscreen();
                fullscreenBtn.innerHTML = '<i class="fas fa-expand"></i>';
            }
        }

        // Add pulse animation and responsive styles
        const style = document.createElement('style');
        style.textContent = `
            @keyframes pulse {
                0%, 100% { opacity: 1; transform: scale(1); }
                50% { opacity: 0.7; transform: scale(1.1); }
            }
            
            .filter-tag:hover {
                background: var(--primary-blue) !important;
                color: white !important;
                transform: scale(1.05);
            }
            
            @media (max-width: 768px) {
                #channels-grid {
                    grid-template-columns: 1fr !important;
                    max-width: 400px;
                    margin: 0 auto;
                }
                
                .container {
                    padding: 0 var(--space-sm);
                }
                
                h2 {
                    font-size: 2rem !important;
                }
                
                .header > .container > div {
                    flex-direction: column;
                    gap: var(--space-sm);
                    align-items: stretch;
                }
                
                .header > .container > div > div {
                    justify-content: center;
                }
                
                .video-player-container {
                    height: 100vh;
                    display: flex;
                    flex-direction: column;
                }
                
                .video-player-container > div:first-child {
                    flex-direction: column;
                    gap: var(--space-sm);
                    align-items: stretch;
                }
                
                .video-player-container > div:first-child > div:last-child {
                    justify-content: center;
                }
                
                .video-player-container #video-container {
                    flex: 1;
                    padding-bottom: 0;
                    height: auto;
                }
            }
            
            @media (max-width: 480px) {
                .channel-card {
                    padding: var(--space-sm) !important;
                }
                
                .channel-card h3 {
                    font-size: 1rem !important;
                }
            }
        `;
        document.head.appendChild(style);

        // Initialize when DOM is loaded
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', init);
        } else {
            init();
        }
    </script>

    <!-- Additional theme support -->
    <script src="js/themes.js"></script>
</body>
</html>